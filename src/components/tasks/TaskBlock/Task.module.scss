.task_wrapper {
    container-type: size;
    container-name: task;
    width: 100%;
    height: 100%;
}

.task {
    width: 100%;
    height: 100%;
    background-color: #1390a0;
    border-radius: var(--gap_xsmall);

    padding: var(--gap_xsmall);
    box-sizing: border-box;
    cursor: default;
    user-select: none;
    overflow: hidden;

    // pointer-events: auto;
    // z-index: 10;

    display: flex;
    flex-direction: column;
}

// Small tasks (compact single row)
@container task (max-height: 49px) {
    .task {
        display: grid;
        grid-template-columns: 1fr auto;
        grid-template-areas: "name time";
        column-gap: var(--gap_xsmall);
        align-items: center;
    }

    .name {
        grid-area: name;
        min-width: 0;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
    }

    .time {
        grid-area: time;
        font-family: "Satoshi-Regular", sans-serif;
        font-size: var(--font_medium);
        white-space: nowrap;
    }

    .description,
    .duration {
        display: none;
    }
}

// Medium tasks
@container task (min-height: 50px) and (max-height: 79px) {
    .task {
        display: grid;
        grid-template-columns: 1fr auto;
        grid-template-areas:
            "name name"
            "time time";
        // gap: var(--gap_xsmall);
        align-content: start;
    }

    .name {
        grid-area: name;
        min-width: 0;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
    }

    .time {
        grid-area: time;
        font-family: "Satoshi-Regular", sans-serif;
        font-size: var(--font_medium);
        white-space: nowrap;
    }

    .description,
    .duration {
        display: none;
    }
}

// Tall tasks (show everything)
@container task (min-height: 80px) {
    .task {
        display: grid;
        gap: var(--gap_xsmall);
        grid-template-columns: 1fr 1fr 20px;
        grid-template-rows: 22px auto 23px;
        grid-template-areas:
            "name name right"
            "time time right"
            "dur empty right";
    }

    .name {
        grid-area: name;
    }

    .time {
        grid-area: time;
        font-family: "Satoshi-Regular", sans-serif;
        font-size: var(--font_medium);
    }

    .description {
        display: none;
    }

    .duration {
        grid-area: dur;
        font-size: var(--font_medium);
        align-self: flex-end;
        padding-top: var(--gap_xsmall);
    }
}

.task.placeholder {
    display: grid;
    gap: var(--gap_xsmall);
    grid-template-columns: 1fr 1fr 20px;
    grid-template-rows: 22px auto 23px;
    grid-template-areas:
        "name name right"
        "time time right"
        "dur empty right";

    .name {
        grid-area: name;
    }

    .time {
        grid-area: time;
        font-family: "Satoshi-Regular", sans-serif;
        font-size: var(--font_medium);
    }

    .description {
        display: none;
    }

    .duration {
        grid-area: dur;
        font-size: var(--font_medium);
        align-self: flex-end;
        padding-top: var(--gap_xsmall);
    }
}

.task_backlogged {
    width: 100%;
    background-color: #1390a0;
    padding: var(--gap_xsmall);
    border-radius: var(--gap_xsmall);
    box-sizing: border-box;

    display: grid;
    gap: var(--gap_xsmall);
    grid-template-columns: 1fr 1fr 20px;
    grid-template-rows:
        auto
        minmax(20px, clamp(20px, auto, 38px))
        auto;
    grid-template-areas:
        "name name right"
        "desc desc right"
        "dur empty right";

    cursor: default;
    user-select: none;

    .name {
        grid-area: name;
        max-height: 22px;
    }

    .description {
        grid-area: desc;
        font-size: var(--font_medium);
        font-family: "Satoshi-Regular", sans-serif;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    .duration {
        grid-area: dur;
        font-size: var(--font_medium);
        align-self: flex-end;
        padding-top: var(--gap_xsmall);
    }
}

.task.skeleton,
.task_backlogged.skeleton {
    background-color: transparent;

    --dot-color: #1390a0;
    --dot-size: 4px;
    --gap-size: 4px;
    --border-width: 2px;
    --radius: var(--gap_xsmall);

    border-radius: var(--radius);

    background:
        repeating-linear-gradient(
            to right,
            var(--dot-color) 0 var(--dot-size),
            transparent var(--dot-size) calc(var(--dot-size) + var(--gap-size))
        ) top / 100% var(--border-width) no-repeat,
        repeating-linear-gradient(
            to bottom,
            var(--dot-color) 0 var(--dot-size),
            transparent var(--dot-size) calc(var(--dot-size) + var(--gap-size))
        ) right / var(--border-width) 100% no-repeat,
        repeating-linear-gradient(
            to right,
            var(--dot-color) 0 var(--dot-size),
            transparent var(--dot-size) calc(var(--dot-size) + var(--gap-size))
        ) bottom / 100% var(--border-width) no-repeat,
        repeating-linear-gradient(
            to bottom,
            var(--dot-color) 0 var(--dot-size),
            transparent var(--dot-size) calc(var(--dot-size) + var(--gap-size))
        ) left / var(--border-width) 100% no-repeat;

    > * {
        visibility: hidden;
    }
}
